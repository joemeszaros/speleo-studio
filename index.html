<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Speleo studio</title>
    <link rel="icon" type="image/png" href="/images/logo.png" />
    <link rel="stylesheet" href="css/navbar.css" />
    <link rel="stylesheet" href="css/iconbar.css" />
    <link rel="stylesheet" href="css/tabulator_midnight.css" />
    <link rel="stylesheet" href="css/project.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/i18n.css" />
    <link rel="stylesheet" href="css/sidebar.css" />

    <script type="importmap">
      {
        "imports": {
          "three": "./dependencies/three/three.module.js",
          "three/addons/": "./dependencies/three/addons/"
        }
      }
    </script>
    <script src="dependencies/tabulator.js"></script>
  </head>

  <body>
    <div class="file-upload">
      <input type="file" id="caveInput" accept=".cave,.json" multiple style="display: none" />
      <input type="file" id="surveyInput" accept=".csv" multiple style="display: none" />
      <input type="file" id="modelInput" accept=".ply" style="display: none" />
      <input type="file" id="configInput" accept=".json" style="display: none" />
    </div>
    <div id="station-context-menu"> </div>
    <div id="explorer-context-menu" class="explorer-context-menu"> </div>
    <div id="infopanel" class="popup"></div>
    <div id="cautionpanel" class="cautionpanel"></div>
    <div id="navbarcontainer" , class="topnavbar"></div>

    <!-- Main content area with flexbox layout -->
    <div id="content-area" class="content-area">
      <!-- Viewport takes remaining space -->
      <div id="viewport" class="viewport">
        <div class="logo"><img width="80px" src="images/logo.png" /></div>
      </div>

      <!-- Sidebar Container -->
      <div id="sidebar-container" class="sidebar-container">
        <div class="sidebar-tabs" role="tablist" aria-label="Sidebar navigation">
          <button class="sidebar-toggle" id="sidebar-toggle" title="Toggle sidebar">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M8.59 7.41L10 6l6 6-6 6-1.41-1.41L13.17 12z" />
            </svg>
          </button>

          <button
            class="sidebar-tab active"
            data-tab="explorer"
            role="tab"
            aria-selected="true"
            aria-controls="explorer-panel"
            >Explorer</button
          >

          <button
            class="sidebar-tab"
            data-tab="settings"
            role="tab"
            aria-selected="false"
            aria-controls="settings-panel"
            >Settings</button
          >

          <button
            class="sidebar-position-toggle"
            id="sidebar-position-toggle"
            title="Toggle sidebar position (Left/Right)"
          >
          </button>
        </div>

        <div class="sidebar-content">
          <div id="explorer-panel" class="sidebar-panel active" aria-hidden="false">
            <div class="explorer-panel">
              <div id="explorer-tree" class="explorer-tree"></div>
            </div>
          </div>

          <div id="settings-panel" class="sidebar-panel" aria-hidden="true">
            <div class="settings-panel">
              <div id="settings-content"></div>
            </div>
          </div>
        </div>

        <div class="sidebar-overview">
          <div class="sidebar-overview-header" id="sidebar-overview-header">
            <span class="sidebar-overview-toggle">â–¼</span>
            <span class="sidebar-overview-title">Scene Overview</span>
          </div>
          <div class="sidebar-overview-content-wrapper" id="sidebar-overview-content-wrapper">
            <div class="sidebar-overview-content" id="sidebar-overview-content">
              <div id="scene-overview" class="scene-overview"></div>
            </div>
          </div>
        </div>

        <div class="sidebar-resizer" id="sidebar-resizer"></div>
      </div>
    </div>

    <div id="tool-panel" class="popup editor"></div>
    <div id="project-panel" style="display: none" class="project-panel"></div>

    <div id="welcome-panel">
      <div class="welcome-container">
        <img src="images/logo.png" alt="Speleo Studio Logo" class="welcome-logo" />
        <h1 class="welcome-title">Welcome to Speleo Studio</h1>
        <p class="welcome-subtitle">
          Your comprehensive cave visualization and survey management platform.<br />
          Explore, analyze, and visualize cave systems with professional tools.
        </p>
        <button
          class="welcome-button"
          onclick="this.closest('#welcome-panel').style.display='none'; localStorage.setItem('welcome', 'false');"
        >
          Let's Get Started
        </button>
      </div>
    </div>

    <div id="fixed-size-editor" class="popup"> </div>
    <div id="resizable-editor" class="popup"></div>
    <div id="export-panel" class="popup"></div>
    <div id="footer" class="footer"></div>
    <div id="view-helper" class="scene-overview"></div>
    <script type="module" src="src/main.js"></script>
    <script type="module">
      import { Main } from './src/main.js';
      new Main();
    </script>
  </body>
</html>
